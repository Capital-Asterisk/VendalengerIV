<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Vendalenger</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link href='https://fonts.googleapis.com/css?family=Ubuntu' rel='stylesheet' type='text/css'>
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.3.0/milligram.css">

    <style>
      body, html {
        font-family: Ubuntu;
        margin: 0;
        height: 100%;
        display: flex;
        /*height: 100%;*/
        /*padding-left: 8%;
        padding-right: 8%;*/
        
      }

      ul {
        list-style-type: none;
        margin: 0;
        padding: 0;
      }
      
      li {
        margin: 0px;
        cursor: pointer;
        border-bottom: 1px solid #1e1e1e;
        border-left: 0px;
        border-right: 0px;
        border-top: 0px;
        box-shadow: inset 0px 0px 6px 0px rgba(0,0,0,0.0);
        background-color: #262626;
        transition: box-shadow 0.9s, background-color 0.9s;
      }

      li a {
        display: block;
        color: #FFF;
        padding: 7px 16px;
        margin: 0px;
        text-decoration: none;
      }

      li a:hover:not(.selected) {
        background-color: #555;
        color: #FFF;
      }
      
      li a:hover {
        color: #FFF;
      }
      
      a {
        color: #4fc400;
      }
      
      hr {
        border-color: #d7d7d7;
      }

      .selected {
        background-color: #1e1e1e;
        box-shadow: inset 0px 1px 6px 0px rgba(0,0,0,0.6);
        transition: box-shadow 0.1s, background-color 0.1s;
        cursor: default;
      }
      
      .vertnav {
        background-color:#0e0e0e;
        width: 192px;
        min-width: 192px;
        margin:0px;
      }
      
      .smallbox {
        border: solid;
        border-width: 1px;
        border-color: #e0e0e0;
        /*padding: 12px;
        margin: 12px;*/
        padding-top: 12px;
      }
      
      #mainContent {
        flex-grow : 3;
        min-height:100%;
        padding: 12px;
      }
      
    </style>
    
    <script>
    
      // Paralell with nav bar
      var pages = [
        {
          id: "home",
          niceName: "Home"
        },
        {
          id: "active",
          niceName: "Active Projects"
        },
        {
          id: "software",
          niceName: "Software"
        },
        {
          id: "about",
          niceName: "About"
        },
        {
          id: "contact",
          niceName: "Contact"
        },
      ]
    
      var content = null;
      var arrow = null;
      var navButts = null;
    
      var loadedPage
   = "";
    
      var clearPage = function() {
        var children = content.children;
        for (var i = children.length; i > 0; i --) {
          children[0].remove();
        }
      }
      
      var loadPage = function(index, addh) {
        selectButton(index);
        //if (loadedPage == url)
        //  return;
        //loadedPage = url;
        clearPage();
        
        if (addh) {
          history.pushState({ }, pages[index].niceName, "#" + pages[index].id);
        }
        
        fetch(pages[index].id + '.html')
	      .then((response) => {
	        if (response.ok) {
	          return response.text();
	        } else {
	          console.error("i just don't know what went wrong");
	          console.error(response);
	          switch(response.status) {
	          case 404:
	            return "<h1>404 Error!</h1><p>Page doesn't want to exist.</p>"
	            break
	          default:
	            return "<h1>Strange Error!</h1><p>see console output</p>";
	          }
	          
	          
	        }
	      })
        .then((html) => {
            content.innerHTML = html;
        })
        .catch((error) => {
            console.warn(error);
        });
      }
    
      var selectButton = function(index) {
        
        var listt = navButts.children[index];
        
        // Add the white arrow thing
        var button = listt.children[listt.children.length - 1];
        listt.insertBefore(arrow, listt.children[0]);
        
        // Remove all the selected buttons
        //var selected = document.getElementsByClassName("selected")
        //for (var i = 0; i < selected; i ++) {
        //  selected[i].
        //}
        // There should only be one selected button so it's okay
        var frog = document.getElementsByClassName("selected");
        if (frog.length > 0) {
          frog[0].classList.remove("selected")
        }
        
        button.classList.add("selected");
        
        
      }
      
      var navPush = function(index) {
        loadPage(index, true);
        //console.log(button);
      }
      
      var loadUrl = function() {
        var tohref = window.location.href.split("#")[1];
      
        if (tohref) {
          for (var i = 0; i < pages.length; i ++) {
            if (pages[i].id == tohref) {
              loadPage(i);
              break;
            }
          }
          
        } else {
          loadPage(0); 
        }
      }
    
      window.onpopstate = function(event) {
        loadUrl();
      };
    
    </script>
  </head>

  <script>
  
    /*$("#nav_home").on("click", function(event) {
      loadPage("home.html")
    });
    
    $("#nav_works").on("click", function(event) {
      loadPage("works.html")
    });
    
    $("#nav_contc").on("click", function(event) {
      loadPage("contc.html")
    });*/
    

  
  </script>
  
  <body style="flex-grow: 1;">
  
    <div style="display: flex; flex-flow: row; flex-grow: 1;">
    
      <div class="vertnav">
      <object data="img/vendalenger_nav.svg" type="image/svg+xml" style="margin:2px; margin-top: 9px;">
      </object>
        <ul id="navButts">
          <li><a onclick="navPush(0)">Home</a></li>
          <li><a onclick="navPush(1)">Active Projects</a></li>
          <li><a onclick="navPush(2)">Software</a></li>
          <li><a onclick="navPush(3)">About</a></li>
          <li><a onclick="navPush(4)">Contact</a></li>


        </ul>
      </div>
      <div id="mainContent">
          

          
      </div>


    </div>
  
    <svg id="arrowThing" width="24" height="24" style="display:hidden;position:relative;top:7px;float:right;">
      <polygon points="24,0 24,24 5,12" style="fill:white;fill-rule:evenodd;stroke-width:0" />
    </svg>
  
    <script>
      content = document.getElementById("mainContent");
      arrow = document.getElementById("arrowThing");
      navButts = document.getElementById("navButts");
        
      loadUrl();
    </script>
    
  </body>
</html>
