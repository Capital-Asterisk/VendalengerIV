<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Vendalenger</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link href='https://fonts.googleapis.com/css?family=Ubuntu' rel='stylesheet' type='text/css'>
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.3.0/milligram.css">

    <style>
      body, html {
        font-family: Ubuntu;
        margin: 0;
        height: 100%;
        display: flex;
        /*height: 100%;*/
        /*padding-left: 8%;
        padding-right: 8%;*/
        
      }

      ul {
        list-style-type: none;
        margin: 0;
        padding: 0;
        background-color: #262626;
      }
      
      li {
        margin: 0px;
        cursor: pointer;
      }

      li a {
        display: block;
        color: #FFF;
        padding: 8px 16px;
        margin: 0px;
        text-decoration: none;
      }

      li a:hover:not(.selected) {
        background-color: #555;
      }
      
      li a:hover {
        color: #FFF;
      }

      .selected {
        background-color: #1e1e1e;
        box-shadow: inset 0px 1px 6px 0px rgba(0,0,0,0.75);
        cursor: default;
      }
      
      .vertnav {
        background-color:#0e0e0e;
        width: 192px;
        min-width: 192px;
      }
      
    </style>
    
    <script>
    
      // Paralell with nav bar
      var pages = [
        {
          id: "home",
          niceName: "Home"
        },
        {
          id: "a",
          niceName: "Page A"
        },
        {
          id: "b",
          niceName: "Page B"
        },
        {
          id: "c",
          niceName: "Page C"
        },
      ]
    
      var content = null;
      var arrow = null;
      var navButts = null;
    
      var loadedPage = "";
    
      var clearPage = function() {
        var children = content.children;
        for (var i = children.length; i > 0; i --) {
          children[0].remove();
        }
      }
      
      var loadPage = function(index, addh) {
        selectButton(index);
        //if (loadedPage == url)
        //  return;
        //loadedPage = url;
        clearPage();
        
        if (addh) {
          history.pushState({ }, pages[index].niceName, "#" + pages[index].id);
        }
        
        fetch(pages[index].id + '.html')
	      .then((response) => response.text())
        .then((html) => {
            content.innerHTML = html;
        })
        .catch((error) => {
            console.warn(error);
        });
      }
    
      var selectButton = function(index) {
        
        var listt = navButts.children[index];
        
        // Add the white arrow thing
        var button = listt.children[listt.children.length - 1];
        listt.insertBefore(arrow, listt.children[0]);
        
        // Remove all the selected buttons
        //var selected = document.getElementsByClassName("selected")
        //for (var i = 0; i < selected; i ++) {
        //  selected[i].
        //}
        // There should only be one selected button so it's okay
        var frog = document.getElementsByClassName("selected");
        if (frog.length > 0) {
          frog[0].classList.remove("selected")
        }
        
        button.classList.add("selected");
        
        
      }
      
      var navPush = function(index) {
        loadPage(index, true);
        //console.log(button);
      }
      
      var loadUrl = function() {
        var tohref = window.location.href.split("#")[1];
      
        if (tohref) {
          for (var i = 0; i < pages.length; i ++) {
            if (pages[i].id == tohref) {
              loadPage(i);
              break;
            }
          }
          
        } else {
          loadPage(0); 
        }
      }
    
      window.onpopstate = function(event) {
        loadUrl();
      };
    
    </script>
  </head>

  <script>
  
    /*$("#nav_home").on("click", function(event) {
      loadPage("home.html")
    });
    
    $("#nav_works").on("click", function(event) {
      loadPage("works.html")
    });
    
    $("#nav_contc").on("click", function(event) {
      loadPage("contc.html")
    });*/
    

  
  </script>
  
  <body style="">
  
    <div style="display: flex; flex-flow: row; flex-grow: 1;">
    
      <div class="vertnav">
      <object data="img/vendalenger_nav.svg" type="image/svg+xml" style="margin:3px">
      </object>
        <ul id="navButts">
          <li><a onclick="navPush(0)">Page A</a></li>
          <li><a onclick="navPush(1)">Home</a></li>
          <li><a onclick="navPush(2)">Page B</a></li>
          <li><a onclick="navPush(3)">Page C</a></li>


        </ul>
      </div>
      <div class="container" id="mainContent" style="flex-grow : 1; min-height:100%">

          

          
      </div>


    </div>
  
    <svg id="arrowThing" width="24" height="24" style="display:hidden;position:relative;top:8px;float:right;">
      <polygon points="24,0 24,24 5,12" style="fill:white;fill-rule:evenodd;stroke-width:0" />
    </svg>
  
    <script>
      content = document.getElementById("mainContent");
      arrow = document.getElementById("arrowThing");
      navButts = document.getElementById("navButts");
        
      loadUrl();
    </script>
    
  </body>
</html>
